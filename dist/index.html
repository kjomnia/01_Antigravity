<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LG U+ Station Manager</title>
    <!-- QR Scanner Library (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>

    <!-- External CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <header>
        <h1 onclick="switchPage('home', document.querySelector('.nav-item:first-child'))">LG U+</h1>
        <div id="clock">00:00</div>
    </header>

    <main>
        <!-- PAGE 1: STATION LIST (HOME) -->
        <section id="page-home" class="page active">
            <h2 style="margin-top:0">국사 리스트</h2>
            <input type="text" id="search-home" placeholder="국사명 또는 위치 검색..." oninput="handleSearch('home')"
                style="margin-bottom:10px;">
            <div id="station-list">
                <!-- Station Cards will be injected by JS -->
            </div>
            <!-- FAB moved to Admin -->
        </section>

        <!-- PAGE 2: ADMIN (Rack & Type Management) -->
        <section id="page-admin" class="page">
            <h2 style="margin-top:0">관리자 페이지</h2>

            <!-- Admin Sub Tabs -->
            <div class="tab-container" style="display:flex; gap:10px; margin-bottom:20px;">
                <button id="tab-station" class="btn btn-outline active" onclick="switchAdminTab('station')"
                    style="flex:1;">국사 관리</button>
                <button id="tab-model" class="btn btn-outline" onclick="switchAdminTab('model')" style="flex:1;">랙
                    모델</button>
                <button id="tab-type" class="btn btn-outline" onclick="switchAdminTab('type')" style="flex:1;">랙
                    종류</button>
            </div>

            <!-- Tab Content: Station Management -->
            <div id="admin-view-station">
                <input type="text" id="search-admin" placeholder="국사명 또는 위치 검색..." oninput="handleSearch('admin')"
                    style="margin-bottom:10px;">
                <div id="admin-station-list">
                    <!-- Station Cards with Delete buttons will be injected by JS -->
                </div>
                <button class="fab" onclick="openAddStationModal()">+</button>
            </div>

            <!-- Tab Content: Rack Models -->
            <div id="admin-view-model" style="display:none;">
                <div id="rack-list">
                    <!-- Rack Cards will be injected by JS -->
                </div>
                <button class="fab" onclick="openAddRackModal()">+</button>
            </div>

            <!-- Tab Content: Rack Types -->
            <div id="admin-view-type" style="display:none;">
                <div id="rack-type-list">
                    <!-- Rack Type Cards will be injected by JS -->
                </div>
                <button class="fab" onclick="openAddTypeModal()">+</button>
            </div>
        </section>

        <!-- PAGE 3: QR SCAN -->
        <section id="page-scan" class="page" style="padding:0; height:100%;">
            <iframe src="scan_legacy.html" title="QR Scanner"
                style="width:100%; height:100%; border:none; display:block;"></iframe>
        </section>
    </main>

    <nav>
        <div class="nav-item active" onclick="switchPage('home', this)">
            <span class="nav-icon">🏢</span>
            <span>국사 관리</span>
        </div>
        <div class="nav-item" onclick="switchPage('admin', this)">
            <span class="nav-icon">⚙️</span>
            <span>관리자</span>
        </div>
        <div class="nav-item" onclick="switchPage('scan', this)">
            <span class="nav-icon">📷</span>
            <span>스캔</span>
        </div>
    </nav>

    <!-- MODAL: ADD STATION -->
    <div id="modal-station" class="modal">
        <div class="modal-content">
            <h3 style="margin-top:0">국사 등록</h3>
            <label>국사명</label>
            <input type="text" id="input-station-name" placeholder="예: 강남 제1국사">
            <label>지역</label>
            <input type="text" id="input-station-loc" placeholder="예: 서울시 강남구">
            <label>국사 종류</label>
            <select id="input-station-type">
                <option value="종합국사">종합국사</option>
                <option value="집중국사">집중국사</option>
                <option value="가입자국사">가입자국사</option>
                <option value="간이국사">간이국사</option>
            </select>
            <label>층수</label>
            <input type="text" id="input-station-floor" placeholder="예: 3층, 지하1층">
            <label>출입방법</label>
            <input type="text" id="input-station-access" placeholder="예: 카드키, 지문, 비밀번호">
            <label>비밀번호</label>
            <input type="text" id="input-station-pwd" placeholder="출입 비밀번호 (필요 시)">
            <label>특이사항</label>
            <textarea id="input-station-note" placeholder="특이사항을 입력하세요"
                style="width:100%; height:80px; background:#0f172a; border:1px solid #475569; border-radius:8px; padding:12px; color:white; margin-bottom:16px;"></textarea>

            <div style="display:flex; gap:10px;">
                <button class="btn btn-outline" onclick="closeModal('modal-station')">취소</button>
                <button class="btn" onclick="saveStation()">저장</button>
            </div>
        </div>
    </div>

    <!-- MODAL: ADD RACK MODEL -->
    <div id="modal-rack" class="modal">
        <div class="modal-content">
            <h3 style="margin-top:0">랙 모델 등록</h3>
            <label>모델명</label>
            <input type="text" id="input-rack-name" placeholder="예: Standard 42U Server Rack">
            <label>랙 종류</label>
            <select id="input-rack-type-select">
                <!-- JS will populate this -->
            </select>
            <label>규격 (U)</label>
            <input type="number" id="input-rack-unit" placeholder="42">
            <div style="display:flex; gap:10px;">
                <button class="btn btn-outline" onclick="closeModal('modal-rack')">취소</button>
                <button class="btn" onclick="saveRack()">저장</button>
            </div>
        </div>
    </div>

    <!-- MODAL: ADD RACK TYPE -->
    <div id="modal-type" class="modal">
        <div class="modal-content">
            <h3 style="margin-top:0">랙 종류 등록</h3>
            <label>종류 명칭</label>
            <input type="text" id="input-type-name" placeholder="예: 서버 랙, 통신 랙">
            <div style="display:flex; gap:10px;">
                <button class="btn btn-outline" onclick="closeModal('modal-type')">취소</button>
                <button class="btn" onclick="saveRackType()">저장</button>
            </div>
        </div>
    </div>

    <!-- External JS -->
    <script src="js/app.js"></script>
</body>

</html>